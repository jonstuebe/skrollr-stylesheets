/*! skrollr-stylesheets 1.0.0 (2015-05-02) | Alexander Prinzhorn - https://github.com/Prinzhorn/skrollr-stylesheets | Free to use under terms of MIT license */
$(document).ready(function(a,b,c){"use strict";var d,e=[],f=/@-skrollr-keyframes\s+([\w-]+)/g,g=/\s*\{\s*((?:[^{]+\{[^}]*\}\s*)+?)\s*\}/g,h=/([\w\-]+)\s*\{([^}]+)\}/g,i="skrollr-",j=/-skrollr-animation-name\s*:\s*([\w-]+)/g,k=/-skrollr-(anchor-target|smooth-scrolling|emit-events|menu-offset)\s*:\s*['"]([^'"]+)['"]/g,l=!1,m=!1,n=function(b){var c=0,d=[];return $.each(b,function(e,f){var g=b[e];if("LINK"===g.tagName&&null!==g.getAttribute("data-skrollr-stylesheet")&&a.matchMedia){var h=g.getAttribute("media");h&&matchMedia(h).matches&&(c++,d.push(g))}}),d},o=function(a){var b=n(a);$.each(b,function(a,b){var c=this,d=c.href.split("/");if(d=d[d.length-1].replace(".css",""),Modernizr.localstorage&&localStorage.getItem("skrollr-cache-"+d)){var f=localStorage.getItem("skrollr-cache-"+d),g=localStorage.getItem("skrollr-cacheExpire");$.now()>=g?p(c.href):(f&&e.push(f),q(e))}else p(c.href)}),0==b.length&&r(!0)},p=function(a,b){var c=a.split("/");c=c[c.length-1].replace(".css",""),$.get(a,function(a){a&&(Modernizr.localstorage&&(localStorage.setItem("skrollr-cache-"+c,a),localStorage.setItem("skrollr-cacheExpire",$.now()+36e5)),e.push(a)),q(e),"function"==typeof b&&b()})},q=function(a){a.reverse();for(var b={},c=[],e=[],f=0;f<a.length;f++)d=a[f],s(d,b),u(d,c),v(d,e);w(b,c,r),y(e,r)},r=function(b){return 1==b&&($(a).trigger("skrollr-ready"),$("html").addClass("skrollr-ready")),1!=m||1!=l?!1:($(a).trigger("skrollr-ready"),void $("html").addClass("skrollr-ready"))},s=function(a,b){f.lastIndex=0;for(var c,d,e,i;null!==(c=f.exec(a));)for(g.lastIndex=f.lastIndex,d=g.exec(a),h.lastIndex=0,i=b[c[1]]={};null!==(e=h.exec(d[1]));)i[e[1]]=e[2].replace(/[\n\r\t]/g,"").replace(/ /g,"")},t=function(a,b){for(var c,d=b;d--&&"{"!==a.charAt(d););for(c=d;c--&&"}"!==a.charAt(c-1););return a.substring(c,d).replace(/[\n\r\t]/g,"")},u=function(a,b){var c,d;for(j.lastIndex=0;null!==(c=j.exec(a));)d=t(a,j.lastIndex),b.push([d,c[1]])},v=function(a,b){var c,d;for(k.lastIndex=0;null!==(c=k.exec(a));)d=t(a,k.lastIndex),b.push([d,c[1],c[2]])},w=function(a,c,d){for(var e,f,g,h,j,k,m,n,o,p=0;p<c.length;p++)if(e=b.querySelectorAll(c[p][0])){f=a[c[p][1]],o=0;for(g in f){for(h=0===g.indexOf(i)?g.substring(i.length):g,j=0;j<e.length;j++)n=e[j],k="data-"+h,n.removeAttribute(k),m=f[g],n.hasAttribute(k)&&(m+=n.getAttribute(k)),n.setAttribute(k,m);o+1==x(f)&&p+1==c.length&&(l=!0,d()),o++}}},x=function(a){var b=0;for(var c in a)a.hasOwnProperty(c)&&b++;return b},y=function(a,c){var d,e,f,g,h;a.length||(m=!0,c());for(var i=0;i<a.length;i++)if(d=a[i],e=b.querySelectorAll(d[0]),f="data-"+d[1],g=d[2],e)for(h=0;h<e.length;h++)e[h].setAttribute(f,g),h+1==e.length&&i+1==a.length&&(m=!0,c())};$(a).on("load",function(){o(b.querySelectorAll("link, style"))})}(window,document));